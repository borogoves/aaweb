 <!DOCTYPE html>
 <html>
 <head>
   <meta charset="utf-8">
 	<title>PLAYER</title>

 	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
 	<link rel="icon" type="image/png" sizes="174x174" href="./style/favicon.png">
	
 	<script src="../build/Tone.js"></script>
 	<script src="./scripts/jquery.min.js"></script>
 	<script src="./scripts/draggabilly.js"></script>
 	<script src="./scripts/StartAudioContext.js"></script>
 	<script src="./scripts/Interface.js"></script>
 	<script src="../build/Logo.js"></script>

 	<link rel="stylesheet" type="text/css" href="./style/examples.css">
	
	<script type="text/javascript">
		// jshint ignore: start//
	</script>

 </head>
 <body>
	<div id="Content">
		<div id="Title">Transport Test</div>
	</div>

 	<script>
		var cont = 0;
 		//the player//
 		var player = new Tone.Player({
 			"url" : "./audio/123.mp3",
 			"loop" : false,
			"retrigger" : false
 		}).toMaster();
		
		function looper(){
			console.log("in loop");
			console.log(cont);
			if (cont == 0){
				console.log("b4 stop");
				player.stop();
				console.log("b4 start");
				player.start(0.0);
				console.log("b4 schedule");
				Tone.Transport.schedule(function(time){
					console.log("scheduling next, about to call nested loop");
					looper();
				}, Tone.Transport.time + 1.0)
			}
		}
		
 		// GUI //

 		Interface.Loader();

 		Interface.Button({
 			text : "Start",
 			start : function(){
				Tone.Transport.start();
 				player.start();
				console.log("pressed start, calling loop")
				looper();
 			}
 		});
 		Interface.Button({
 			text : "Exit Loop and Play Until End",
 			start : function(){
				//turn looping off--the player should continue playing past the loop point??
				cont = 1;
 			}
 		});
 	</script>

 </body>
 </html>